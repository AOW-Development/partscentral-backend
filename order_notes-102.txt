RBAC 

roles :

1) Admin  : all read , all write 
2) manager : few read, few write
3) sales : lesser write , few read


rules :

1. what is my role
2. what resources im trying to access 
3. at what endpoint
4. is it allowed
5. if allowed , than what is the rule.

==> creating user account with role field in user table
==>

------------------------------------



for leads : 

- accept leads via webhooks ,validate hook,



---------------------------------------------

POST order via rest 
inform admin via socket.io(emit socket immediatly after the db transaction has commited , emit directly from same process that handles the REST request)
Details GET full details of order 
POST order via rest from dashboard



what should the socket emit event contain :
OrderId
customer_name
customer_email
mobile
totalamount
status

{
  "type":"new_order",
  "order": {
    "id":"ord_123",
    "status":"paid",
    "total": 1299,
    "customerName":"",
    "createdAt":"",
    "mobile":"",
    "customer_email":""
  }
}


Data from frontend that POST request need to commit in db :

billingInfo (infor for these see global stores and  payMethod file)
shippingInfo
customerInfo
cartItems
paymentInfo 

when customer places the order take these info and POST request commit in db and than emits a socket.io event to notify admin about newly created Order and socket event contains following info about Order :

{
  "type":"new_order",
  "order": {
    "id":"ord_123",
    "status":"paid",
    "total": 1299,
    "customerName":"",
    "createdAt":"",
    "mobile":"",
    "customer_email":""
  }
}

Check prisma.schema and cotroller,service,routes in db if logic 

add upgrade header in nginx 
explicitly enable cors server and client
enable cord for localhsot as well
registering a middleware using 












 
